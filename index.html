<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spesial Untukmu di Hari Valentine</title>
    <!-- Font Romantis -->
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&family=Pacifico&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --soft-pink: #ffc2d1;
            --hot-pink: #fb6f92;
            --bg-pink: #ffe5ec;
            --dark-pink: #ff477e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-pink);
            overflow-x: hidden;
            overflow-y: auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 0;
        }

        /* Latar Belakang Animasi Love */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .heart-particle {
            position: absolute;
            color: var(--hot-pink);
            font-size: 20px;
            pointer-events: none;
            z-index: -1;
            animation: fall linear forwards;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10vh) translateX(0) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.8;
            }

            100% {
                transform: translateY(110vh) translateX(var(--drift)) rotate(var(--rot));
                opacity: 0;
            }
        }

        /* --- STYLES UNTUK GAME (SECTION 1) --- */
        #game-section {
            text-align: center;
            z-index: 10;
            margin: auto;
        }

        .title {
            font-family: 'Pacifico', cursive;
            color: var(--dark-pink);
            margin-bottom: 20px;
            font-size: 2rem;
            text-shadow: 2px 2px white;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        .card {
            width: 100px;
            height: 140px;
            perspective: 1000px;
            cursor: pointer;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.is-flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .card-front {
            background-color: var(--hot-pink);
            border: 4px solid white;
            color: white;
            font-size: 2rem;
        }

        .card-back {
            background-color: white;
            color: var(--hot-pink);
            transform: rotateY(180deg);
            font-size: 2.5rem;
        }

        .message-box {
            margin-top: 20px;
            font-weight: 600;
            color: var(--dark-pink);
            min-height: 24px;
        }

        .btn-next {
            display: none;
            margin-top: 20px;
            padding: 12px 30px;
            background-color: var(--dark-pink);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Quicksand', sans-serif;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(251, 111, 146, 0.4);
            transition: 0.3s;
        }

        .btn-next:hover {
            transform: scale(1.1);
        }

        /* --- STYLES UNTUK HALAMAN UTAMA (SECTION 2) --- */
        #main-section {
            display: none;
            text-align: center;
            width: 90%;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.85);
            padding: 40px 20px;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--soft-pink);
            animation: fadeIn 1s forwards;
            margin: auto;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .typing-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--dark-pink);
            line-height: 1.6;
            min-height: 150px;
        }

        /* Dedication Text */
        .dedication {
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            color: var(--hot-pink);
            font-weight: 600;
            margin: 10px 0;
            font-style: italic;
        }

        .dear-text {
            margin-bottom: 20px;
        }

        .from-text {
            margin-top: 25px;
            text-align: right;
        }

        .surprise-btn {
            margin-top: 30px;
            padding: 15px 35px;
            background: linear-gradient(45deg, var(--hot-pink), var(--dark-pink));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            font-weight: 600;
        }

        /* Video Container untuk Goma & Peach - 16:9 Aspect Ratio */
        .video-container {
            margin: 0 auto 15px auto;
            max-width: 280px;
            width: 100%;
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(251, 111, 146, 0.25);
            border: 2px solid var(--soft-pink);
            /* Aspect ratio 16:9 */
            aspect-ratio: 16 / 9;
        }

        .video-container video {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
            /* Agar video tidak stretch */
        }

        /* Popup Animasi Love Modern & Organic */
        .big-heart {
            position: fixed;
            width: 150px;
            height: 150px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            pointer-events: none;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .big-heart svg {
            width: 100%;
            height: 100%;
            fill: var(--dark-pink);
            stroke: white;
            stroke-width: 1px;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
        }

        .big-heart.show {
            animation: heartPop 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes heartPop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }

            30% {
                transform: translate(-50%, -50%) scale(1.8);
                opacity: 1;
            }

            60% {
                transform: translate(-50%, -50%) scale(1.4);
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(1.6);
                opacity: 0;
            }
        }

        .burst-heart {
            position: fixed;
            pointer-events: none;
            z-index: 99;
            animation: burstOut 1s ease-out forwards;
        }

        @keyframes burstOut {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translate(var(--tx), var(--ty)) scale(0) rotate(var(--tr));
                opacity: 0;
            }
        }

        /* Kontrol Musik */
        .music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 10px;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 1000;
        }

        @media (max-width: 480px) {
            .card-grid {
                grid-template-columns: repeat(2, 1fr);
                max-width: 220px;
            }

            .title {
                font-size: 1.5rem;
            }

            .typing-text {
                font-size: 1.4rem;
            }
        }
    </style>
</head>

<body>

    <!-- Latar Belakang Hati -->
    <div class="hearts-container" id="hearts"></div>

    <!-- Mini Game Section -->
    <div id="game-section">
        <h1 class="title">Buka Kartu Cintamu ‚ù§Ô∏è</h1>
        <div class="card-grid" id="cardGrid">
            <!-- Kartu akan di-generate oleh JS -->
        </div>
        <div class="message-box" id="gameMessage">Pilih salah satu kartu untuk mendapatkan kejutan!</div>
        <button class="btn-next" id="btnGoToMain" onclick="showMainSection()">Buka Pesan Spesial ‚ú®</button>
    </div>

    <!-- Main Message Section -->
    <div id="main-section">
        <!-- Video Goma & Peach -->
        <div class="video-container">
            <video id="gomaVideo" autoplay loop muted playsinline>
                <!-- Download video Goma & Peach dan simpan sebagai goma-peach.mp4 -->
                <source src="goma-peach.mp4" type="video/mp4">
                Video Goma & Peach üíï
            </video>
        </div>

        <h1 class="title">Happy Valentine's Day!</h1>

        <!-- Dear Tia -->
        <div class="dedication dear-text">Dear Tia,</div>

        <div class="typing-text" id="typingText"></div>

        <!-- From Hamid -->
        <div class="dedication from-text">From: Hamid ‚ù§Ô∏è</div>

        <button class="surprise-btn" onclick="triggerSurprise()">Klik Untuk Kejutan! üíñ</button>
    </div>

    <!-- Popup Animasi Besar -->
    <div class="big-heart" id="bigHeart">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg>
    </div>

    <!-- Musik Romantis -->
    <div class="music-toggle" id="musicToggle" onclick="toggleMusic()" title="Klik untuk putar musik">üéµ</div>
    <audio id="bgMusic" loop preload="metadata">
        <!-- Menggunakan file lokal untuk menghindari masalah CORS -->
        <!-- Silakan download musik romantic dan simpan sebagai 'music.mp3' di folder yang sama -->
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Cek apakah file musik ada
        const audio = document.getElementById('bgMusic');
        audio.addEventListener('error', function () {
            console.log('File musik tidak ditemukan. Silakan tambahkan file music.mp3 di folder yang sama.');
            document.getElementById('musicToggle').style.opacity = '0.3';
            document.getElementById('musicToggle').title = 'Musik tidak tersedia (tambahkan file music.mp3)';
        });
    </script>

    <script>
        // Inisialisasi Latar Belakang Animasi Hati yang Organik
        const heartsContainer = document.getElementById('hearts');

        function createHeart(x, y, isBurst = false) {
            const heart = document.createElement('div');
            heart.classList.add(isBurst ? 'burst-heart' : 'heart-particle');
            heart.innerHTML = '‚ù§Ô∏è';

            if (isBurst) {
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 200 + 100;
                heart.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                heart.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
                heart.style.setProperty('--tr', (Math.random() * 360) + 'deg');
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
            } else {
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.setProperty('--drift', (Math.random() * 100 - 50) + 'px');
                heart.style.setProperty('--rot', (Math.random() * 360 + 360) + 'deg');
            }

            heartsContainer.appendChild(heart);
            setTimeout(() => heart.remove(), isBurst ? 1000 : 7000);
        }
        setInterval(() => createHeart(), 400);

        // Pengaturan Game Buka Kartu
        const cardGrid = document.getElementById('cardGrid');
        const gameMessage = document.getElementById('gameMessage');
        const btnNext = document.getElementById('btnGoToMain');
        const cardsData = ['‚ùå', '‚ùå', 'üíñ', '‚ùå', '‚ùå', '‚ùå']; // Hanya satu yang benar

        // Acak kartu
        cardsData.sort(() => Math.random() - 0.5);

        let gameFinished = false;

        cardsData.forEach((content, index) => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.innerHTML = `
                <div class="card-inner">
                    <div class="card-front">?</div>
                    <div class="card-back">${content}</div>
                </div>
            `;

            card.addEventListener('click', (e) => {
                if (gameFinished) return;

                card.classList.add('is-flipped');

                if (content === 'üíñ') {
                    gameFinished = true;
                    gameMessage.innerText = "Yeee! Kamu menemukan cintaku! üòç";
                    gameMessage.style.color = "var(--dark-pink)";
                    triggerBurst(e.clientX, e.clientY);
                    triggerBigHeart();
                    btnNext.style.display = 'inline-block';
                } else {
                    gameMessage.innerText = "Yah, coba lagi ya sayang! üòã";
                    setTimeout(() => {
                        card.classList.remove('is-flipped');
                    }, 1000);
                }
            });
            cardGrid.appendChild(card);
        });

        function triggerBurst(x, y) {
            for (let i = 0; i < 15; i++) {
                createHeart(x, y, true);
            }
        }

        // Fungsi menampilkan Halaman Utama
        function showMainSection() {
            document.getElementById('game-section').style.display = 'none';
            const main = document.getElementById('main-section');
            main.style.display = 'block';

            // Coba auto-play musik
            playMusic();

            startTyping();
        }

        // Efek Mengetik dengan Auto-Scroll
        const textToType = "Selamat Hari Valentine, Sayangku...\n\nAku minta maaf ya untuk semua waktu yang aku buat kamu capek dan kesal. Aku tau aku nggak sempurna, dan kadang aku bikin kesalahan yang nyakitin kamu. Maafin aku ya.\n\nKamu itu artinya segalanya buat aku, dan aku nggak mau kita berantem lagi. Yuk kita damai dan mulai dari awal lagi. Kamu adalah hadiah terindah dalam hidupku, dan aku janji akan berusaha lebih baik lagi buat bikin kamu bahagia.\n\nMakasih ya udah selalu sabar sama aku. Aku sayang kamu lebih dari yang bisa aku ungkapkan. ‚ù§Ô∏è";
        let charIndex = 0;
        function startTyping() {
            const typingElement = document.getElementById('typingText');

            if (charIndex < textToType.length) {
                typingElement.innerHTML += textToType.charAt(charIndex) === '\n' ? '<br>' : textToType.charAt(charIndex);
                charIndex++;

                // Auto-scroll ke bawah setiap beberapa karakter
                if (charIndex % 3 === 0) {
                    window.scrollTo({
                        top: document.documentElement.scrollHeight,
                        behavior: 'smooth'
                    });
                }

                setTimeout(startTyping, 50);
            }
        }

        // Animasi Kejutan Besar
        function triggerBigHeart() {
            const bh = document.getElementById('bigHeart');
            bh.classList.add('show');
            setTimeout(() => bh.classList.remove('show'), 2000);
        }

        function triggerSurprise() {
            triggerBigHeart();
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;

            for (let i = 0; i < 40; i++) {
                setTimeout(() => createHeart(centerX, centerY, true), i * 30);
            }
            // Munculkan notifikasi custom
            const notif = document.createElement('div');
            notif.style.position = 'fixed';
            notif.style.top = '20px';
            notif.style.background = 'white';
            notif.style.padding = '10px 20px';
            notif.style.borderRadius = '30px';
            notif.style.boxShadow = '0 10px 25px rgba(251, 111, 146, 0.3)';
            notif.style.color = 'var(--dark-pink)';
            notif.style.fontWeight = 'bold';
            notif.style.animation = 'fadeIn 0.5s ease-out';
            notif.innerText = "You are my sunshine! ‚òÄÔ∏è‚ù§Ô∏è";
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3000);
        }

        // Kontrol Musik yang Lebih Sederhana dan Reliable
        function playMusic() {
            const audio = document.getElementById('bgMusic');
            const toggleBtn = document.getElementById('musicToggle');

            if (audio.paused) {
                audio.play().then(() => {
                    toggleBtn.innerText = '‚è∏Ô∏è';
                    toggleBtn.title = 'Klik untuk pause musik';
                }).catch(err => {
                    console.log('Autoplay diblokir, klik ikon musik untuk memutar');
                    toggleBtn.innerText = 'üéµ';
                    toggleBtn.title = 'Klik untuk putar musik';
                });
            }
        }

        function toggleMusic() {
            const audio = document.getElementById('bgMusic');
            const toggleBtn = document.getElementById('musicToggle');

            if (audio.paused) {
                audio.play().then(() => {
                    toggleBtn.innerText = '‚è∏Ô∏è';
                    toggleBtn.title = 'Klik untuk pause musik';
                }).catch(err => {
                    alert('Tidak bisa memutar musik. Coba refresh halaman.');
                });
            } else {
                audio.pause();
                toggleBtn.innerText = 'üéµ';
                toggleBtn.title = 'Klik untuk putar musik';
            }
        }
    </script>
</body>

</html>